<Window x:Class="DailyVitals.App.Views.BloodGlucoseView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Blood Glucose Entry"
        Height="520"
        Width="680"
        WindowStartupLocation="CenterOwner">

    <Grid Margin="15">

        <!-- MAIN ROWS -->
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Person -->
            <RowDefinition Height="200"/>
            <!-- History -->
            <RowDefinition Height="Auto"/>
            <!-- Form -->
            <RowDefinition Height="Auto"/>
            <!-- Buttons -->
        </Grid.RowDefinitions>

        <!-- PERSON SELECTOR -->
        <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="160"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <TextBlock Text="Person:"
                       VerticalAlignment="Center"/>

            <ComboBox Grid.Column="1"
                      Width="260"
                      Margin="0,5"
                      ItemsSource="{Binding Persons}"
                      SelectedItem="{Binding SelectedPerson, Mode=TwoWay}"
                      DisplayMemberPath="FullName"/>
        </Grid>

        <!-- HISTORY GRID -->
        <DataGrid Grid.Row="1"
                  Margin="0,10,0,0"
                  ItemsSource="{Binding History}"
                  SelectedItem="{Binding SelectedHistory}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  SelectionMode="Single">

            <DataGrid.Columns>
                <DataGridTextColumn Header="Date"
                                    Width="140"
                                    Binding="{Binding ReadingTime, StringFormat=d}"/>

                <DataGridTextColumn Header="Glucose (mg/dL)"
                                    Width="160"
                                    Binding="{Binding GlucoseValue}"/>

                <DataGridTextColumn Header="Notes"
                                    Width="*"
                                    Binding="{Binding Notes}"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- ENTRY FORM -->
        <Grid Grid.Row="2" Margin="0,15,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="160"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- GLUCOSE -->
            <TextBlock Grid.Row="0"
                       Text="Glucose Value:"
                       VerticalAlignment="Center"/>

            <TextBox Grid.Row="0"
                     Grid.Column="1"
                     Width="120"
                     Margin="0,4"
                     Text="{Binding Glucose, UpdateSourceTrigger=PropertyChanged}"/>

            <!-- READING TIME -->
            <TextBlock Grid.Row="1"
                       Text="Reading Time:"
                       VerticalAlignment="Center"/>

            <DatePicker Grid.Row="1"
                        Grid.Column="1"
                        Width="160"
                        Margin="0,4"
                        SelectedDate="{Binding ReadingTime}"/>

            <!-- NOTES -->
            <TextBlock Grid.Row="2"
                       Text="Notes:"
                       VerticalAlignment="Top"/>

            <TextBox Grid.Row="2"
                     Grid.Column="1"
                     Height="70"
                     Margin="0,4"
                     AcceptsReturn="True"
                     TextWrapping="Wrap"
                     Text="{Binding Notes, UpdateSourceTrigger=PropertyChanged}"/>
        </Grid>

        <!-- BUTTON BAR -->
        <Grid Grid.Row="3" Margin="0,20,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- NEW -->
            <Button Grid.Column="0"
                    Width="100"
                    Height="32"
                    Content="New Reading"
                    Click="NewReading_Click"/>

            <!-- SAVE / CANCEL -->
            <StackPanel Grid.Column="2"
                        Orientation="Horizontal">

                <Button Width="100"
            Height="32"
            Margin="0,0,10,0"
            Content="Delete"
            Click="Delete_Click"
            IsEnabled="{Binding CanDelete}"/>
                
                <Button Width="100"
                        Height="32"
                        Margin="0,0,10,0"
                        Content="Save"
                        Click="Save_Click"
                        IsEnabled="{Binding CanSave}"/>

                <Button Width="100"
                        Height="32"
                        Content="Cancel"
                        Click="Cancel_Click"/>
            </StackPanel>
        </Grid>

    </Grid>
</Window>
