<Window x:Class="DailyVitals.App.Views.BloodPressureView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Blood Pressure Entry"
        Height="650"
        Width="680"
        WindowStartupLocation="CenterOwner">
    <Window.Resources>

        <Style x:Key="MainMenuButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="220"/>
            <Setter Property="Height" Value="38"/>
            <Setter Property="Margin" Value="6"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Background" Value="#E0E0E0"/>
            <Setter Property="BorderBrush" Value="#707070"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="Black"/>

            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border
                      x:Name="border"
                      Background="{TemplateBinding Background}"
                      BorderBrush="{TemplateBinding BorderBrush}"
                      BorderThickness="{TemplateBinding BorderThickness}"
                      CornerRadius="6">

                            <ContentPresenter
                          HorizontalAlignment="Center"
                          VerticalAlignment="Center"
                          RecognizesAccessKey="True"/>
                        </Border>

                        <!-- Visual states -->
                        <ControlTemplate.Triggers>

                            <!-- Hover -->
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border"
                                  Property="Background"
                                  Value="#D6D6D6"/>
                            </Trigger>

                            <!-- Pressed -->
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border"
                                  Property="Background"
                                  Value="#C8C8C8"/>
                            </Trigger>

                            <!-- Disabled -->
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border"
                                  Property="Background"
                                  Value="#EEEEEE"/>
                                <Setter Property="Foreground"
                                  Value="#888888"/>
                            </Trigger>

                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources>

    <Grid Margin="15">

        <!-- MAIN ROWS -->
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Person -->
            <RowDefinition Height="200"/>
            <!-- History -->
            <RowDefinition Height="50"/>
            <!-- Severity -->
            <RowDefinition Height="Auto"/>
            <!-- Form -->
            <RowDefinition Height="Auto"/>
            <!-- Buttons -->
        </Grid.RowDefinitions>

        <!-- PERSON -->
        <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="160"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <TextBlock Text="Person:"
                       VerticalAlignment="Center"/>

            <ComboBox Grid.Column="1"
                      Width="260"
                      ItemsSource="{Binding Persons}"
                      SelectedItem="{Binding SelectedPerson, Mode=TwoWay}"
                      DisplayMemberPath="FullName"
                      Margin="0,5"/>
        </Grid>

        <!-- HISTORY GRID -->
        <DataGrid Grid.Row="1"
                  ItemsSource="{Binding History}"
                  SelectedItem="{Binding SelectedHistory}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  Margin="0,10,0,33"
                  SelectionMode="Single">

            <DataGrid.Columns>
                <DataGridTextColumn Header="Date"
                                    Binding="{Binding ReadingTime, StringFormat=d}"
                                    Width="120"/>
                <DataGridTextColumn Header="Sys"
                                    Binding="{Binding Systolic}"
                                    Width="70"/>
                <DataGridTextColumn Header="Dia"
                                    Binding="{Binding Diastolic}"
                                    Width="70"/>
                <DataGridTextColumn Header="Pulse"
                                    Binding="{Binding Pulse}"
                                    Width="70"/>
                <DataGridTextColumn Header="Notes"
                                    Binding="{Binding Notes}"
                                    Width="*"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- SEVERITY BANNER (FULL WIDTH, ISOLATED) -->
        <Border Grid.Row="2"                
                Margin="0,10"
                CornerRadius="6"
                Background="{Binding SeverityBrush}"
                BorderBrush="DarkGray"
                BorderThickness="1"
                SnapsToDevicePixels="True">

            <TextBlock Text="{Binding SeverityText}"
                       FontSize="15"
                       FontWeight="Bold"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"/>
        </Border>

        <!-- FORM GRID -->
        <Grid Grid.Row="3" Margin="0,5,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="160"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- SYSTOLIC -->
            <TextBlock Grid.Row="0" Text="Systolic (mmHg):"
                       VerticalAlignment="Center"/>
            <TextBox Grid.Row="0" Grid.Column="1"
                     Width="100"
                     Text="{Binding Systolic, UpdateSourceTrigger=PropertyChanged}"
                     Margin="0,4"/>

            <!-- DIASTOLIC -->
            <TextBlock Grid.Row="1" Text="Diastolic (mmHg):"
                       VerticalAlignment="Center"/>
            <TextBox Grid.Row="1" Grid.Column="1"
                     Width="100"
                     Text="{Binding Diastolic, UpdateSourceTrigger=PropertyChanged}"
                     Margin="0,4"/>

            <!-- PULSE -->
            <TextBlock Grid.Row="2" Text="Pulse (bpm):"
                       VerticalAlignment="Center"/>
            <TextBox Grid.Row="2" Grid.Column="1"
                     Width="100"
                     Text="{Binding Pulse, UpdateSourceTrigger=PropertyChanged}"
                     Margin="0,4"/>

            <!-- READING TIME -->
            <TextBlock Grid.Row="3" Text="Reading Time:"
                       VerticalAlignment="Center"/>
            <DatePicker Grid.Row="3" Grid.Column="1"
                        Width="160"
                        SelectedDate="{Binding ReadingTime}"
                        Margin="0,4"/>

            <!-- NOTES -->
            <TextBlock Grid.Row="4" Text="Notes:"
                       VerticalAlignment="Top"/>
            <TextBox Grid.Row="4" Grid.Column="1"
                     Height="70"
                     AcceptsReturn="True"
                     TextWrapping="Wrap"
                     Text="{Binding Notes, UpdateSourceTrigger=PropertyChanged}"
                     Margin="0,4"/>
        </Grid>

        <!-- BUTTON BAR -->
        <Grid Grid.Row="4" Margin="0,15,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- NEW -->
            <Button Grid.Column="0"
                    Content="New Reading"
                    Width="100"
                    Height="32"
                    Style="{StaticResource MainMenuButtonStyle}"
                    Click="NewReading_Click"/>

            <!-- SAVE / DELETE / CANCEL -->
            <StackPanel Grid.Column="2" Orientation="Horizontal">

                <Button Content="Delete"
                Width="100"
                Height="32"
                Margin="0,0,10,0"
                Style="{StaticResource MainMenuButtonStyle}"
                Click="Delete_Click"
                IsEnabled="{Binding CanDelete}"/>

                <Button Content="Save"
                Width="100"
                Height="32"
                Style="{StaticResource MainMenuButtonStyle}"
                Margin="0,0,10,0"
                Click="Save_Click"
                IsEnabled="{Binding CanSave}"/>

                <Button Content="Cancel"
                Width="100"
                Height="32"
                Style="{StaticResource MainMenuButtonStyle}"
                Click="Cancel_Click"/>
            </StackPanel>
        </Grid>

    </Grid>
</Window>
