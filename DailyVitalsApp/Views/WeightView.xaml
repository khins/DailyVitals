<Window x:Class="DailyVitals.App.Views.WeightView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Weight Entry"
        Height="640"
        Width="700"
        WindowStartupLocation="CenterOwner">
    <Window.Resources>

        <Style x:Key="MainMenuButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="220"/>
            <Setter Property="Height" Value="38"/>
            <Setter Property="Margin" Value="6"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Background" Value="#E0E0E0"/>
            <Setter Property="BorderBrush" Value="#707070"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="Black"/>

            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border
                    x:Name="border"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="6">

                            <ContentPresenter
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        RecognizesAccessKey="True"/>
                        </Border>

                        <!-- Visual states -->
                        <ControlTemplate.Triggers>

                            <!-- Hover -->
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border"
                                Property="Background"
                                Value="#D6D6D6"/>
                            </Trigger>

                            <!-- Pressed -->
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border"
                                Property="Background"
                                Value="#C8C8C8"/>
                            </Trigger>

                            <!-- Disabled -->
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border"
                                Property="Background"
                                Value="#EEEEEE"/>
                                <Setter Property="Foreground"
                                Value="#888888"/>
                            </Trigger>

                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources>
    <Grid Margin="15">

        <!-- MAIN ROWS -->
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Person -->
            <RowDefinition Height="220"/>
            <!-- History -->
            <RowDefinition Height="Auto"/>
            <!-- Entry -->
            <RowDefinition Height="Auto"/>
            <!-- Buttons -->
        </Grid.RowDefinitions>

        <!-- PERSON SELECT -->
        <ComboBox Grid.Row="0"
                  Width="260"
                  ItemsSource="{Binding Persons}"
                  SelectedItem="{Binding SelectedPerson}"
                  DisplayMemberPath="FullName"/>

        <!-- HISTORY GRID -->
        <DataGrid Grid.Row="1"
                  Margin="0,12,0,0"
                  ItemsSource="{Binding History}"
                  SelectedItem="{Binding SelectedHistory}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True">

            <DataGrid.Columns>
                <DataGridTextColumn Header="Date"
                                    Width="130"
                                    Binding="{Binding ReadingTime, StringFormat=d}"/>

                <DataGridTextColumn Header="Weight"
                                    Width="90"
                                    Binding="{Binding WeightValue}"/>

                <DataGridTextColumn Header="Unit"
                                    Width="60"
                                    Binding="{Binding WeightUnit}"/>

                <DataGridTextColumn Header="Height (ft)"
                                    Width="90"
                                    Binding="{Binding HeightFt}"/>

                <DataGridTextColumn Header="Notes"
                                    Width="*"
                                    Binding="{Binding Notes}"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- ENTRY FORM -->
        <Grid Grid.Row="2" Margin="0,18,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="160"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <!-- Weight -->
                <RowDefinition Height="Auto"/>
                <!-- Height -->
                <RowDefinition Height="Auto"/>
                <!-- Time -->
                <RowDefinition Height="Auto"/>
                <!-- BMI -->
                <RowDefinition Height="Auto"/>
                <!-- Notes -->
            </Grid.RowDefinitions>

            <!-- WEIGHT -->
            <TextBlock Grid.Row="0"
                       Text="Weight:"
                       VerticalAlignment="Center"/>

            <TextBox Grid.Row="0"
                     Grid.Column="1"
                     Width="120"
                     VerticalAlignment="Center"
                     Text="{Binding WeightValue, UpdateSourceTrigger=PropertyChanged}"/>

            <!-- HEIGHT -->
            <TextBlock Grid.Row="1"
                       Text="Height (ft):"
                       VerticalAlignment="Center"
                       Margin="0,10,0,0"/>

            <StackPanel Grid.Row="1"
                        Grid.Column="1"
                        Orientation="Vertical"
                        Margin="0,10,0,0">

                <TextBox Width="120"
                         Text="{Binding HeightFt, UpdateSourceTrigger=PropertyChanged}"/>

                <TextBlock FontSize="11"
                           Foreground="Gray"
                           Text="Example: 5.75 = 5 ft 9 in"/>
            </StackPanel>

            <!-- READING TIME -->
            <TextBlock Grid.Row="2"
                       Text="Reading Time:"
                       VerticalAlignment="Center"
                       Margin="0,10,0,0"/>

            <DatePicker Grid.Row="2"
                        Grid.Column="1"
                        Width="160"
                        Margin="0,10,0,0"
                        SelectedDate="{Binding ReadingTime}"/>

            <!-- BMI -->
            <!-- BMI COLOR BAND -->
            <Border Grid.Row="3"
        Grid.ColumnSpan="2"
        Height="34"
        Margin="0,10,0,0"
        CornerRadius="4"
        BorderBrush="Gray"
        BorderThickness="1"
        Background="{Binding BMIBrush}">

                <StackPanel Orientation="Horizontal"
                HorizontalAlignment="Left"
                VerticalAlignment="Center">

                    <TextBlock Text="BMI:"
                   FontWeight="SemiBold"
                   Margin="0,0,8,0" TextAlignment="Left"/>

                    <TextBlock Text="{Binding BMI, StringFormat=F1}"
                   FontWeight="Bold"
                   Margin="0,0,10,0"/>

                    <TextBlock Text="{Binding BMICategory}"
                   FontWeight="SemiBold"/>
                </StackPanel>
            </Border>


            <!-- NOTES -->
            <TextBlock Grid.Row="4"
                       Text="Notes:"
                       VerticalAlignment="Top"
                       Margin="0,10,0,0"/>

            <TextBox Grid.Row="4"
                     Grid.Column="1"
                     Height="70"
                     Margin="0,10,0,0"
                     AcceptsReturn="True"
                     TextWrapping="Wrap"
                     Text="{Binding Notes}"/>
        </Grid>

        <!-- BUTTON BAR -->
        <Grid Grid.Row="3" Margin="0,22,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- NEW -->
            <Button Grid.Column="0"
                    Width="100"
                    Height="32"
                    Content="New"
                    Style="{StaticResource MainMenuButtonStyle}"
                    Click="New_Click"/>

            <!-- RIGHT BUTTONS -->
            <StackPanel Grid.Column="2"
                        Orientation="Horizontal">

                <Button Width="100"
                        Height="32"
                        Margin="0,0,10,0"
                        Content="Delete"
                        Style="{StaticResource MainMenuButtonStyle}"
                        IsEnabled="{Binding SelectedHistory}"
                        Click="Delete_Click"/>

                <Button Width="100"
                        Height="32"
                        Margin="0,0,10,0"
                        Content="Save"
                        Style="{StaticResource MainMenuButtonStyle}"
                        IsEnabled="{Binding CanSave}"
                        Click="Save_Click"/>

                <Button Width="100"
                        Height="32"
                        Content="Cancel"
                        Style="{StaticResource MainMenuButtonStyle}"
                        Click="Cancel_Click"/>
            </StackPanel>
        </Grid>

    </Grid>
</Window>
